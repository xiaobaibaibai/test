<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„Ÿæ©çƒŸèŠ±</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Arial', sans-serif;
        }
        
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .message {
            position: absolute;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 5px #ff00ff, 0 0 10px #ff00ff, 0 0 20px #ff00ff;
            opacity: 0;
            z-index: 2;
            animation: fadeInOut 2s ease-in-out;
            white-space: nowrap;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0; transform: scale(1.5); }
        }
        
        .title {
            position: fixed;
            top: 20px;
            color: #fff;
            font-size: 32px;
            text-align: center;
            z-index: 3;
            text-shadow: 0 0 10px #ff69b4;
        }
        
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 3;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .music-control:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div class="title"></div>
    <canvas id="fireworks"></canvas>
    <audio id="bgMusic" loop preload="auto" autoplay>
        <source src="https://nf-sycdn.kuwo.cn/209fd31d5feb1f94f140582d292fc6e0/68440196/resource/n3/76/61/1987023712.mp3?bitrate$128&format$mp3&user$" type="audio/mp3" >
    </audio>
    <div class="music-control" onclick="toggleMusic()">ğŸµ</div>
    
    <script>
        // ç”»å¸ƒè®¾ç½®
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // çª—å£å¤§å°è°ƒæ•´æ—¶é‡è®¾ç”»å¸ƒ
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // çƒŸèŠ±ç²’å­ç±»
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = {
                    x: (Math.random() - 0.5) * 8,
                    y: (Math.random() - 0.5) * 8
                };
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.01;
                this.size = Math.random() * 3 + 1;
            }
            
            update() {
                this.velocity.y += 0.05; // é‡åŠ›æ•ˆæœ
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= this.decay;
            }
            
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }
        }
        
        // çƒŸèŠ±ç±»
        class Firework {
            constructor(x, y, targetX, targetY, color) {
                this.x = x;
                this.y = y;
                this.targetX = targetX;
                this.targetY = targetY;
                this.color = color;
                this.particles = [];
                this.speed = 2;
                this.angle = Math.atan2(targetY - y, targetX - x);
                this.velocity = {
                    x: Math.cos(this.angle) * this.speed,
                    y: Math.sin(this.angle) * this.speed
                };
                this.exploded = false;
            }
            
            update() {
                if (!this.exploded) {
                    this.x += this.velocity.x;
                    this.y += this.velocity.y;
                    
                    // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç›®æ ‡ä½ç½®
                    const distance = Math.hypot(this.targetX - this.x, this.targetY - this.y);
                    if (distance < 5) {
                        this.explode();
                    }
                }
                
                // æ›´æ–°ç²’å­
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    this.particles[i].update();
                    if (this.particles[i].alpha <= 0) {
                        this.particles.splice(i, 1);
                    }
                }
            }
            
            draw() {
                if (!this.exploded) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                    
                    // å°¾è¿¹æ•ˆæœ
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x - this.velocity.x * 4, this.y - this.velocity.y * 4);
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
                
                // ç»˜åˆ¶ç²’å­
                for (const particle of this.particles) {
                    particle.draw();
                }
            }
            
            explode() {
                this.exploded = true;
                createMessage(this.targetX, this.targetY);
                
                // åˆ›å»ºçˆ†ç‚¸ç²’å­
                for (let i = 0; i < 150; i++) {
                    this.particles.push(new Particle(this.x, this.y, this.color));
                }
            }
        }
        
        // æ„Ÿè°¢è¯­æ•°ç»„
        const messages = [
            "ä¸€ç”Ÿæœ‰ä½ ï¼Œè¶³çŸ£",
            "çˆ±ä½ ï¼Œä»å¿ƒåˆ°éª¨",
            "ä½ æ˜¯æˆ‘å”¯ä¸€çš„ç­”æ¡ˆ",
            "æ‰§å­æ‰‹ï¼Œå…±ç™½å¤´",
            "æˆ‘çš„ä¸–ç•Œå…¨æ˜¯ä½ ",
            "ä¸ä½ ï¼Œæ—¥æ—¥çš†ç”œ",
            "å¤«å¤ä½•æ±‚ï¼Ÿå”¯ä½ ",
            "å¿ƒå½’å¤„ï¼Œæ˜¯ä½ ",
            "ä½™ç”Ÿè¯·å¤šæŒ‡æ•™",
            "çˆ±ä½ ï¼Œèƒœè¿‡æ˜¨æ—¥"
        ];
        
        // åˆ›å»ºæ„Ÿè°¢æ–‡å­—
        function createMessage(x, y) {
            const message = document.createElement('div');
            message.className = 'message';
            message.textContent = messages[Math.floor(Math.random() * messages.length)];
            message.style.left = x + 'px';
            message.style.top = y + 'px';
            document.body.appendChild(message);
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                message.remove();
            }, 2000);
        }
        
        // çƒŸèŠ±æ•°ç»„
        const fireworks = [];
        
        // éšæœºç”ŸæˆçƒŸèŠ±
        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = canvas.height;
            const targetX = Math.random() * canvas.width;
            const targetY = Math.random() * canvas.height * 0.6;
            
            // éšæœºé¢œè‰²
            const hue = Math.floor(Math.random() * 360);
            const color = `hsl(${hue}, 100%, 50%)`;
            
            fireworks.push(new Firework(x, y, targetX, targetY, color));
        }
        
        // åŠ¨ç”»å¾ªç¯
        function animate() {
            requestAnimationFrame(animate);
            
            // åŠé€æ˜é»‘è‰²èƒŒæ™¯ï¼Œåˆ›å»ºæ‹–å°¾æ•ˆæœ
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // éšæœºç”Ÿæˆæ–°çƒŸèŠ±
            if (Math.random() < 0.05) {
                createFirework();
            }
            
            // æ›´æ–°å’Œç»˜åˆ¶æ‰€æœ‰çƒŸèŠ±
            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].update();
                fireworks[i].draw();
                
                // å¦‚æœçƒŸèŠ±çˆ†ç‚¸ä¸”æ‰€æœ‰ç²’å­éƒ½æ¶ˆå¤±äº†ï¼Œå°±ç§»é™¤å®ƒ
                if (fireworks[i].exploded && fireworks[i].particles.length === 0) {
                    fireworks.splice(i, 1);
                }
            }
        }
        
        // ç‚¹å‡»é¡µé¢ä¹Ÿç”ŸæˆçƒŸèŠ±
        canvas.addEventListener('click', (e) => {
            const x = Math.random() * canvas.width;
            const y = canvas.height;
            const targetX = e.clientX;
            const targetY = e.clientY;
            
            const hue = Math.floor(Math.random() * 360);
            const color = `hsl(${hue}, 100%, 50%)`;
            
            fireworks.push(new Firework(x, y, targetX, targetY, color));
        });
        
        // èƒŒæ™¯éŸ³ä¹æ§åˆ¶
        const bgMusic = document.getElementById('bgMusic');
        let isMusicPlaying = false;
        
        // é¢„åŠ è½½éŸ³ä¹
        bgMusic.load();
        
        // æ·»åŠ é”™è¯¯å¤„ç†
        bgMusic.addEventListener('error', function(e) {
            // console.log('éŸ³ä¹åŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨éŸ³ä¹æº');
            // å°è¯•åŠ è½½å¤‡ç”¨éŸ³ä¹æº
            bgMusic.src = 'https://nf-sycdn.kuwo.cn/209fd31d5feb1f94f140582d292fc6e0/68440196/resource/n3/76/61/1987023712.mp3?bitrate$128&format$mp3&user$';
            bgMusic.load();
        });
        
        function toggleMusic() {
            if (isMusicPlaying) {
                bgMusic.pause();
            } else {
                bgMusic.play();
            }
            isMusicPlaying = !isMusicPlaying;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ’­æ”¾éŸ³ä¹
        window.addEventListener('load', function() {
            // å°è¯•è‡ªåŠ¨æ’­æ”¾
            bgMusic.play().then(() => {
                isMusicPlaying = true;
            }).catch(() => {
                // å¦‚æœè‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œæ·»åŠ ä¸€æ¬¡æ€§ç‚¹å‡»äº‹ä»¶æ¥å¯åŠ¨éŸ³ä¹
                document.addEventListener('click', function startMusic() {
                    bgMusic.play().then(() => {
                        isMusicPlaying = true;
                    });
                    document.removeEventListener('click', startMusic);
                }, { once: true });
            });
        });
        
        // æ·»åŠ ç”¨æˆ·äº¤äº’äº‹ä»¶ç›‘å¬ï¼Œç”¨äºè§¦å‘éŸ³ä¹æ’­æ”¾
        document.addEventListener('click', function() {
            if (!isMusicPlaying) {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                });
            }
        }, { once: true });
        
        // æ·»åŠ é¡µé¢å¯è§æ€§å˜åŒ–ç›‘å¬
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible' && !isMusicPlaying) {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                });
            }
        });
        
        // å¼€å§‹åŠ¨ç”»
        animate();
    </script>
</body>
</html>